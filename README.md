# ğŸ‘¶ å¤©æ°— Ã— å­ã©ã‚‚æœè£…ææ¡ˆã‚¢ãƒ—ãƒªï¼ˆFlutterï¼‰

æœ¬ã‚¢ãƒ—ãƒªã¯ã€æ°—æ¸©ãƒ»æ¹¿åº¦ãƒ»ä½“æ„Ÿæ¸©åº¦ãªã©ã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«ã€
**å­ã©ã‚‚ã®æœ€é©ãªæœè£…ã‚’ææ¡ˆ** ã™ã‚‹ Flutter ã‚¢ãƒ—ãƒªã§ã™ã€‚

è¨­è¨ˆã«ã¯ Flutter ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆfeature-first + Clean Architecture + Riverpodï¼‰ã‚’æ¡ç”¨ã—ã€
ä¿å®ˆæ€§ãƒ»æ‹¡å¼µæ€§ãƒ»ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã«å„ªã‚ŒãŸæ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

---

# ğŸš€ ä¸»ãªæ©Ÿèƒ½

| æ©Ÿèƒ½             | å†…å®¹                                 |
| ---------------- | ------------------------------------ |
| ä»Šæ—¥ã®å¤©æ°—       | æ¸©åº¦ã€ä½“æ„Ÿæ¸©åº¦ã€æ¹¿åº¦ã€é¢¨é€Ÿã‚’è¡¨ç¤º     |
| æœè£…ææ¡ˆ         | æ°—æ¸©ã«å¿œã˜ã¦é©åˆ‡ãªæœè£…ã‚’è‡ªå‹•ææ¡ˆ     |
| é€±é–“äºˆå ±         | ä»Šå¾Œ 4ã€œ7 æ—¥é–“ã®æ°—è±¡ã¨æœè£…å€™è£œã‚’è¡¨ç¤º |
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† | åœ°åŸŸãƒ»ç”Ÿå¹´æœˆæ—¥ãªã©ã®ç®¡ç†             |

---

# ğŸ› ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡ï¼ˆé‡è¦ï¼‰

æœ¬ã‚¢ãƒ—ãƒªã¯ **feature-first æ§‹æˆ + 3 å±¤æ§‹é€ ï¼ˆdata / domain / presentationï¼‰** ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## â–  é¸å®šç†ç”±ï¼ˆã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ï¼‰

| è¨­è¨ˆæ–¹é‡                    | æ ¹æ‹                                                                          |
| --------------------------- | ---------------------------------------------------------------------------- |
| feature-first               | Flutter ãƒãƒ¼ãƒ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æ¨å¥¨ã€‚æ©Ÿèƒ½å˜ä½ã§ç‹¬ç«‹æ€§ãŒé«˜ã¾ã‚Šã€ä¿å®ˆãŒå®¹æ˜“ã€‚ |
| Clean Architecture (ç°¡æ˜“ç‰ˆ) | UIãƒ»ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ‡ãƒ¼ã‚¿ã®è²¬å‹™åˆ†é›¢ã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆæ€§ï¼å†åˆ©ç”¨æ€§ãŒå‘ä¸Šã€‚             |
| Riverpod                    | Provider ã®ä¸Šä½äº’æ›ã€‚ä¾å­˜æ³¨å…¥ã€çŠ¶æ…‹ç®¡ç†ã€ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“ã€‚                      |
| å˜æ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼          | `UI â†’ UseCase â†’ Repository â†’ DataSource` ã®é †ã§è¦‹é€šã—ãŒè‰¯ã„ã€‚                |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
â†“
Flutter UIï¼ˆWidgetsï¼‰
â†“
Provider / Notifierï¼ˆState ç®¡ç†ï¼‰
â†“
UseCaseï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
â†“
Repositoryï¼ˆæŠ½è±¡ï¼‰
â†“
RepositoryImplï¼ˆå®Ÿè£…ï¼‰
â†“
DataSourceï¼ˆAPI / local DBï¼‰
â†“
å¤–éƒ¨ APIï¼ˆOpenWeatherï¼‰
â†“
DataSource â†’ RepositoryImpl â†’ UseCase â†’ Provider â†’ UI
ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒæˆ»ã£ã¦ãã‚‹ï¼‰

---

# ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆç”¨é€”ã¤ããƒ»è©³ç´°ï¼‰

```
lib/
â”œâ”€â”€ main.dart # ã‚¢ãƒ—ãƒªèµ·å‹•ã‚¨ãƒ³ãƒˆãƒª
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ app.dart # MaterialAppã€ãƒ†ãƒ¼ãƒã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚ â”œâ”€â”€ router.dart # ãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚ â””â”€â”€ presentation/ # ã‚¢ãƒ—ãƒªå…¨ä½“ã®ã‚·ã‚§ãƒ«ã‚„å…±é€šãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ core/ # å…¨Featureå…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚ â”œâ”€â”€ error/
â”‚ â”‚ â””â”€â”€ failures.dart # å…±é€šã‚¨ãƒ©ãƒ¼å®šç¾©
â”‚ â”œâ”€â”€ network/
â”‚ â”‚ â””â”€â”€ api_client.dart # HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚ â”œâ”€â”€ util/
â”‚ â”‚ â””â”€â”€ converters.dart # æ—¥ä»˜ã‚„æ¸©åº¦å¤‰æ›ãªã©ã®å…±é€šé–¢æ•°
â”‚ â”œâ”€â”€ widgets/
â”‚ â”‚ â””â”€â”€ section_container.dart / section_header.dart ãªã©
â”‚ â”œâ”€â”€ theme.dart # ã‚«ãƒ©ãƒ¼ã€TextStyleã€UIãƒ†ãƒ¼ãƒï¼ˆç¾è¡Œã¯ core/theme.dart ã«é›†ç´„ï¼‰
â”‚ â””â”€â”€ web_scroll_behavior.dart ãªã©
â”‚
â””â”€â”€ features/
â”œâ”€â”€ weather/ # å¤©æ°—æ©Ÿèƒ½
â”‚ â”œâ”€â”€ data/
â”‚ â”‚ â”œâ”€â”€ datasources/
â”‚ â”‚ â”‚ â””â”€â”€ weather_remote_data_source.dart # APIã‚¢ã‚¯ã‚»ã‚¹
â”‚ â”‚ â”œâ”€â”€ models/
â”‚ â”‚ â”‚ â””â”€â”€ weather_dto.dart # APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«
â”‚ â”‚ â””â”€â”€ repositories/
â”‚ â”‚ â””â”€â”€ weather_repository_impl.dart # Repositoryå®Ÿè£…
â”‚ â”œâ”€â”€ domain/
â”‚ â”‚ â”œâ”€â”€ entities/weather.dart # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆç´”ç²‹ï¼‰
â”‚ â”‚ â”œâ”€â”€ repositories/weather_repository.dart # æŠ½è±¡Repository
â”‚ â”‚ â””â”€â”€ usecases/get_today_weather.dart # UseCase
â”‚ â””â”€â”€ presentation/
â”‚   â”œâ”€â”€ providers/weather_providers.dart # Riverpod Provider
â”‚   â””â”€â”€ widgets/ # WeatherHero / WeatherIcon ãªã©ã®UIéƒ¨å“
â”‚
â”œâ”€â”€ clothes/ # æœè£…ææ¡ˆæ©Ÿèƒ½ï¼ˆæ¥½å¤©ã¯å‰Šé™¤æ¸ˆã¿ï¼‰
â”‚ â”œâ”€â”€ data/
â”‚ â”‚ â”œâ”€â”€ datasources/ ...
â”‚ â”‚ â”œâ”€â”€ models/ ...
â”‚ â”‚ â””â”€â”€ repositories/ ...
â”‚ â”œâ”€â”€ domain/
â”‚ â”‚ â”œâ”€â”€ entities/clothes_suggestion.dart
â”‚ â”‚ â”œâ”€â”€ repositories/ ...
â”‚ â”‚ â””â”€â”€ usecases/ ...
â”‚ â””â”€â”€ presentation/
â”‚   â”œâ”€â”€ providers/ ...
â”‚   â””â”€â”€ widgets/scene_section.dart ãªã©
â”‚
â”œâ”€â”€ onboarding/ # åˆæœŸè¨­å®šãƒ»å®¶æ—ç™»éŒ²ãªã©
â”‚ â””â”€â”€ presentation/ ...
â””â”€â”€ profile/ # ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
  â”œâ”€â”€ data/
  â”œâ”€â”€ domain/
  â””â”€â”€ presentation/pages/profile_page.dart
```

---

# ğŸ§  è¨­è¨ˆæ€æƒ³ï¼ˆãªãœã“ã®æ§‹æˆãªã®ã‹ï¼Ÿï¼‰

## 1. UI ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Œå…¨ã«åˆ†é›¢ã—ãŸã„ãŸã‚

- æœè£…ææ¡ˆãƒ­ã‚¸ãƒƒã‚¯ã‚’ UI ã«è¿‘ã„å ´æ‰€ã«ç½®ãã¨ã€ãƒ‡ã‚¶ã‚¤ãƒ³å¤‰æ›´ã§å£Šã‚Œã‚„ã™ã„
- ãã“ã§ UseCase å±¤ã‚’ä½œã‚Šãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’éš”é›¢
  â†’ ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ãŒå‘ä¸Š

## 2. å¤©æ°— API ã‚’å°†æ¥å·®ã—æ›¿ãˆå¯èƒ½ã«ã™ã‚‹ãŸã‚

`domain` â†’ `repositories` ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã‚‹ãŸã‚

- å¤©æ°— API ã‚’ OpenWeather â†’ WeatherAPI ã«å¤‰æ›´
  ã—ã¦ã‚‚ UI/ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å¤‰æ›´ä¸è¦ã€‚

## 3. Riverpod ã«ã‚ˆã‚‹ä¾å­˜æ€§æ³¨å…¥ã®æ©æµ

- HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- Repository
- UseCase
  ã‚’å…±é€š Provider ã§ç®¡ç†ã—ã€
  ç”»é¢å´ã§ã¯ `ref.watch()` ã™ã‚‹ã ã‘ã§åˆ©ç”¨ã§ãã‚‹ã€‚

---

# ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹é‡

| ãƒ†ã‚¹ãƒˆå¯¾è±¡                  | ç†ç”±                                                   |
| --------------------------- | ------------------------------------------------------ |
| UseCaseï¼ˆæœè£…ææ¡ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰ | ãƒ­ã‚¸ãƒƒã‚¯ãŒ UI ã‹ã‚‰å®Œå…¨ã«ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ |
| Repository                  | API ãƒ¬ã‚¤ãƒ¤ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ãªã©ã‚’ç¢ºèª                       |
| Provider                    | çŠ¶æ…‹é·ç§»ï¼ˆloading â†’ data â†’ errorï¼‰ãŒæ­£ã—ã„ã‹           |
| DTO å¤‰æ›                    | å¤–éƒ¨ API å¤‰æ›´ã®å½±éŸ¿ã‚’æ—©æœŸæ¤œçŸ¥                          |

---

# ğŸ“¡ API æ§‹æˆ

| API            | ç”¨é€”                                       |
| -------------- | ------------------------------------------ |
| OpenWeatherMap | ä»Šæ—¥ã®å¤©æ°—ã€ä½“æ„Ÿæ¸©åº¦ã€æ¹¿åº¦ã€é¢¨é€Ÿã€é€±é–“äºˆå ± |

---

# ğŸ¨ UI ãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡

- æ˜ã‚‹ã„ç™½èƒŒæ™¯ï¼‹é’ç³»ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼
- å­ã©ã‚‚å‘ã‘ã®å„ªã—ã„é…è‰²
- ä½™ç™½ã‚’åºƒãå–ã‚Šã€è¦–èªæ€§ã‚’ç¢ºä¿
- 1 ç”»é¢ã‚ãŸã‚Šã®æƒ…å ±é‡ã‚’çµã‚‹

---

# ğŸ‘©â€ğŸ’» é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆé‡è¦ï¼‰

- UI ã¯ StatelessWidget ãŒåŸºæœ¬
- çŠ¶æ…‹ã¯ Provider / StateNotifier ã«é›†ç´„
- ã‚µãƒ¼ãƒ“ã‚¹ã¯ data å±¤ã«å¯„ã›ã€presentation å±¤ã«æ›¸ã‹ãªã„
- API ã‚­ãƒ¼ã¯ `.env` or secrets manager ã«éš”é›¢
- commit å‰ã« `flutter analyze` ã‚’å®Ÿè¡Œ
- Model / Provider / UseCase ã¯å˜ç‹¬ã§ãƒ†ã‚¹ãƒˆå¯èƒ½ãªæ§‹é€ ã‚’ä¿ã¤

---

# ğŸ§­ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & å®Ÿè¡Œæ–¹æ³•

```bash
flutter pub get
flutter analyze
flutter test
flutter run
```

å¿…è¦ã«å¿œã˜ã¦ API ã‚­ãƒ¼ã‚„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®šã‚’ `.env` / Secrets ã«é…ç½®ã—ã¦ãã ã•ã„ï¼ˆOpenWeatherMapï¼‰ã€‚

---

## ğŸ”§ ENVï¼ˆç’°å¢ƒå¤‰æ•°ï¼‰ã§ API æ¥ç¶šå…ˆã‚’åˆ‡ã‚Šæ›¿ãˆ

æœ¬ã‚¢ãƒ—ãƒªã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ `API_BASE_URL` ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚`ENV` ã¨ã„ã† Dart å®šæ•°ã§èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã¾ã™ã€‚

- é–‹ç™ºï¼ˆAndroid Emulator ã®æ¨å¥¨å€¤ã¯ `10.0.2.2`ï¼‰

```bash
flutter run --dart-define=ENV=development
```

- æœ¬ç•ª

```bash
flutter run --dart-define=ENV=production
```

ç”¨æ„æ¸ˆã¿ã®ãƒ•ã‚¡ã‚¤ãƒ«:

- `.env.sample` â€¦ ä¾‹ç¤ºç”¨
- `.env.development` â€¦ é–‹ç™ºç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `http://10.0.2.2:3000`ï¼‰
- `.env.production` â€¦ æœ¬ç•ªç”¨ï¼ˆä¾‹: `https://api.example.com`ï¼‰

`API_BASE_URL` ã‚’å„ `.env.*` ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚

ã‚¢ãƒ—ãƒªå´ã§ã¯ `AppConfig.apiBaseUrl` ã‚’å‚ç…§ã—ã€`ApiClient.resolve('/api/...')` ã§ç’°å¢ƒã«å¿œã˜ãŸ `Uri` ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

---
